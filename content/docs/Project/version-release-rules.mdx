---
title: 通用产品版本号发布规则
description: 对于 ByteDream 发布的产品配套版本命名规则
icon: BookOpen
---


## 目录
- [1. 版本号命名规则](#1-版本号命名规则)
- [2. 版本类型定义](#2-版本类型定义)
- [3. 版本变更流程](#3-版本变更流程)
- [4. 发布流程](#4-发布流程)
- [5. 版本管理规范](#5-版本管理规范)
- [6. 变更记录要求](#6-变更记录要求)
- [7. 紧急发布流程](#7-紧急发布流程)
- [8. 项目类型适配](#8-项目类型适配)
- [9. 附录](#9-附录)

---

## 1. 版本号命名规则

### 1.1 语义化版本号格式

<Callout type="info" title="语义化版本控制">
  采用 [语义化版本控制 2.0.0](https://semver.org/lang/zh-CN/) 标准，确保版本号的语义清晰和一致性。
</Callout>

```bash
主版本号.次版本号.修订号[-预发布标识][+构建元数据]
```

| 组件 | 说明 |
|------|------|
| `主版本号` | 不兼容的API修改 |
| `次版本号` | 向下兼容的功能性新增 |
| `修订号` | 向下兼容的问题修正 |
| `预发布标识` | 可选，如 `alpha`、`beta`、`rc` |
| `构建元数据` | 可选，如构建时间、提交哈希 |

**示例：**
- `1.0.0` - 正式发布版本
- `1.2.3` - 主版本1，次版本2，修订号3
- `2.0.0-beta.1` - 2.0.0的beta预发布版本
- `1.0.0+20231201.123456` - 带构建元数据的版本

### 1.2 版本号递增规则

| 版本类型 | 递增规则 | 说明 |
|---------|---------|------|
| 主版本号 | 不兼容的API修改 | 重大架构变更、不兼容的功能修改 |
| 次版本号 | 向下兼容的功能性新增 | 新功能、性能优化、兼容性改进 |
| 修订号 | 向下兼容的问题修正 | Bug修复、安全补丁、文档更新 |

### 1.3 预发布版本标识

| 标识 | 说明 | 使用场景 |
|------|------|----------|
| `alpha` | 内部测试版本 | 功能开发完成，内部测试阶段 |
| `beta` | 公开测试版本 | 功能稳定，邀请用户测试 |
| `rc` | 候选发布版本 | 功能完整，最终测试阶段 |

---

## 2. 版本类型定义

### 2.1 正式版本 (Release)
- **格式：** `X.Y.Z`
- **特点：** 功能完整、经过充分测试
- **发布条件：** 通过所有测试，无已知严重问题

### 2.2 预发布版本 (Pre-release)
- **格式：** `X.Y.Z-alpha.N`、`X.Y.Z-beta.N`、`X.Y.Z-rc.N`
- **特点：** 功能开发中或测试中
- **发布条件：** 功能基本完成，需要进一步测试

### 2.3 热修复版本 (Hotfix)
- **格式：** `X.Y.Z` (修订号递增)
- **特点：** 紧急修复严重问题
- **发布条件：** 生产环境出现严重问题需要立即修复

---

## 3. 版本变更流程

### 3.1 功能开发流程

<Mermaid
  chart="
   graph TD
    A[功能需求] --> B[开发分支]
    B --> C[功能开发]
    C --> D[单元测试]
    D --> E[集成测试]
    E --> F[代码审查]
    F --> G[合并到主分支]
    G --> H[版本号递增]
    H --> I[发布测试版本]
    I --> J[用户测试]
    J --> K[修复问题]
    K --> L[发布正式版本]"
/>


### 3.2 版本号递增决策树

<Callout type="info" title="决策流程">
  根据变更类型选择合适的版本号递增方式，确保版本号的语义准确性。
</Callout>

```
是否需要修复严重问题？
├─ 是 → 热修复版本 (修订号递增)
└─ 否 → 是否有新功能？
    ├─ 是 → 次版本号递增
    └─ 否 → 是否有不兼容变更？
        ├─ 是 → 主版本号递增
        └─ 否 → 无需版本变更
```

---

## 4. 发布流程

### 4.1 正式版本发布流程

1. **准备阶段**
   - [ ] 完成所有功能开发
   - [ ] 通过所有自动化测试
   - [ ] 完成代码审查
   - [ ] 更新版本号
   - [ ] 更新变更日志

2. **测试阶段**
   - [ ] 内部测试
   - [ ] 集成测试
   - [ ] 性能测试
   - [ ] 安全测试

3. **发布阶段**
   - [ ] 创建发布标签
   - [ ] 生成发布包
   - [ ] 部署到生产环境
   - [ ] 验证部署结果
   - [ ] 发布公告

4. **后续阶段**
   - [ ] 监控系统状态
   - [ ] 收集用户反馈
   - [ ] 处理问题报告

### 4.2 预发布版本流程

1. **准备阶段**
   - [ ] 功能开发完成
   - [ ] 基础测试通过
   - [ ] 更新版本号（添加预发布标识）

2. **发布阶段**
   - [ ] 创建预发布标签
   - [ ] 生成预发布包
   - [ ] 发布到测试环境
   - [ ] 邀请用户测试

3. **反馈收集**
   - [ ] 收集测试反馈
   - [ ] 修复发现的问题
   - [ ] 准备下一个版本

---

## 5. 版本管理规范

### 5.1 Git分支策略

| 分支类型 | 命名规范 | 用途 |
|---------|---------|------|
| 主分支 | `main` | 稳定版本，生产环境代码 |
| 开发分支 | `develop` | 开发集成分支 |
| 功能分支 | `feature/功能名称` | 新功能开发 |
| 修复分支 | `hotfix/问题描述` | 紧急问题修复 |
| 发布分支 | `release/版本号` | 版本发布准备 |

### 5.2 标签管理

**标签命名规范：**
- 正式版本：`v1.0.0`
- 预发布版本：`v1.0.0-beta.1`
- 热修复版本：`v1.0.1`

**标签创建时机：**
- 正式版本：发布到生产环境时
- 预发布版本：发布到测试环境时
- 热修复版本：修复严重问题时

### 5.3 版本文件管理

**必需文件：**
- `CHANGELOG.md` - 变更日志
- `VERSION` - 当前版本号
- `README.md` - 项目说明

**可选文件：**
- `RELEASE_NOTES.md` - 发布说明
- `UPGRADE.md` - 升级指南

---

## 6. 变更记录要求

### 6.1 变更日志格式

```markdown
# 变更日志

本项目遵循 [语义化版本控制](https://semver.org/lang/zh-CN/) 规范。

## [未发布]

### 新增
- 新功能A
- 新功能B

### 修改
- 功能C的优化

### 修复
- 修复问题D
- 修复问题E

### 破坏性变更
- 移除过时的API
- 修改配置格式

## [1.2.0] - 2023-12-01

### 新增
- 新功能描述
- 性能优化

### 修改
- 功能改进描述
- API优化

### 修复
- 修复问题描述
- 安全补丁

### 破坏性变更
- 不兼容的API变更

## [1.1.0] - 2023-11-15

### 新增
- 功能描述

### 修复
- 问题修复描述
```

### 6.2 提交信息规范

**格式：**
```
类型(范围): 简短描述

详细描述（可选）

关联问题: #123
```

**类型说明：**
- `feat` - 新功能
- `fix` - 问题修复
- `docs` - 文档更新
- `style` - 代码格式调整
- `refactor` - 代码重构
- `test` - 测试相关
- `chore` - 构建过程或辅助工具的变动
- `perf` - 性能优化
- `ci` - CI/CD相关
- `build` - 构建系统相关
- `revert` - 回滚提交

**示例：**
```
feat(auth): 添加OAuth2.0认证支持

实现了基于OAuth2.0的用户认证系统，
支持Google、GitHub等第三方登录。

关联问题: #456
```

---

## 7. 紧急发布流程

### 7.1 紧急情况定义

<Callout type="error" title="紧急情况定义">
  以下情况需要启动紧急发布流程：
</Callout>

- 生产环境严重故障
- 安全漏洞
- 数据丢失风险
- 系统无法访问
- 严重性能问题

### 7.2 紧急发布流程

1. **问题确认**
   - [ ] 确认问题严重程度
   - [ ] 评估影响范围
   - [ ] 确定修复方案

2. **快速修复**
   - [ ] 创建热修复分支
   - [ ] 实施修复方案
   - [ ] 进行必要测试

3. **紧急发布**
   - [ ] 更新版本号（修订号递增）
   - [ ] 创建热修复标签
   - [ ] 部署到生产环境
   - [ ] 验证修复效果

4. **后续处理**
   - [ ] 更新变更日志
   - [ ] 通知相关团队
   - [ ] 分析问题根因
   - [ ] 制定预防措施

### 7.3 紧急发布时间要求

| 问题类型 | 响应时间 | 修复时间 |
|---------|---------|---------|
| 系统崩溃 | 30分钟内 | 2小时内 |
| 安全漏洞 | 1小时内 | 24小时内 |
| 功能异常 | 2小时内 | 48小时内 |
| 性能问题 | 4小时内 | 72小时内 |

---

## 8. 项目类型适配

### 8.1 Web应用项目

**特殊考虑：**
- 前端版本号与后端版本号同步
- 静态资源版本管理
- CDN缓存策略
- 数据库迁移版本

**版本文件：**
- `package.json` (Node.js项目)
- `pom.xml` (Java Maven项目)
- `build.gradle` (Java Gradle项目)
- `*.csproj` (.NET项目)

### 8.2 移动应用项目

**特殊考虑：**
- iOS/Android版本号同步
- 应用商店发布流程
- 强制更新机制
- 热更新版本管理

**版本文件：**
- `Info.plist` (iOS)
- `build.gradle` (Android)
- `app.json` (React Native)

### 8.3 桌面应用项目

**特殊考虑：**
- 自动更新机制
- 安装包版本管理
- 依赖库版本控制
- 系统兼容性

**版本文件：**
- `package.json` (Electron)
- `*.csproj` (.NET)
- `CMakeLists.txt` (C++)

### 8.4 库/框架项目

**特殊考虑：**
- API兼容性保证
- 依赖版本管理
- 文档版本同步
- 示例代码更新

**版本文件：**
- `package.json` (npm包)
- `setup.py` (Python包)
- `Cargo.toml` (Rust包)

### 8.5 微服务项目

**特殊考虑：**
- 服务间版本兼容性
- API网关版本管理
- 数据库版本同步
- 配置中心版本

**版本文件：**
- `docker-compose.yml`
- `kubernetes.yaml`
- `helm-charts/`

---

## 9. 附录

### 9.1 版本号检查清单

**发布前检查：**
- [ ] 版本号格式正确
- [ ] 版本号已更新
- [ ] 变更日志已更新
- [ ] 所有测试通过
- [ ] 代码审查完成
- [ ] 文档已更新
- [ ] 依赖版本已检查
- [ ] 安全扫描通过

**发布后检查：**
- [ ] 标签已创建
- [ ] 发布包已生成
- [ ] 部署成功
- [ ] 功能验证通过
- [ ] 监控正常
- [ ] 用户通知已发送

### 9.2 常见问题

**Q: 什么时候需要递增主版本号？**
A: 当API发生不兼容变更时，如删除接口、修改接口参数结构等。

**Q: 预发布版本可以发布到生产环境吗？**
A: 不建议。预发布版本仅用于测试，生产环境应使用正式版本。

**Q: 如何回滚版本？**
A: 创建回滚标签，部署到生产环境，更新版本号并记录在变更日志中。

**Q: 多个功能同时开发如何处理版本号？**
A: 在开发分支上并行开发，发布时根据实际变更类型决定版本号递增方式。

**Q: 如何处理依赖库的版本更新？**
A: 遵循语义化版本控制，主版本号变更需要谨慎评估兼容性。

### 9.3 工具推荐

**版本管理工具：**
- Git - 代码版本控制
- GitFlow - 分支管理策略
- Conventional Commits - 提交信息规范
- Semantic Release - 自动版本管理

**自动化工具：**
- GitHub Actions - CI/CD流程
- GitLab CI - CI/CD流程
- Jenkins - 持续集成
- Release Drafter - 自动生成变更日志

**监控工具：**
- 应用性能监控 (APM)
- 错误追踪系统 (Sentry)
- 用户反馈收集
- 系统监控 (Prometheus)

**项目特定工具：**
- npm version - Node.js项目
- gradle version - Java项目
- dotnet version - .NET项目
- cargo version - Rust项目

### 9.4 最佳实践

1. **版本号管理**
   - 使用语义化版本控制
   - 保持版本号简洁明了
   - 避免使用特殊字符

2. **变更记录**
   - 及时更新变更日志
   - 使用清晰的分类标签
   - 提供详细的变更说明

3. **发布流程**
   - 建立标准化的发布流程
   - 自动化测试和部署
   - 建立回滚机制

4. **团队协作**
   - 明确版本管理职责
   - 建立代码审查机制
   - 定期培训团队成员

---

## 文档维护

**最后更新：** 2023年12月1日  
**维护人员：** 开发团队  
**审核周期：** 每季度审核一次  
**版本：** 1.0.0

---

*本文档遵循语义化版本控制规范，适用于所有类型的软件项目。如有疑问请联系开发团队。* 